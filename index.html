<!DOCTYPE html>
<html lang="et">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tuiklemine</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }
        h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
        }
        .frequency {
            margin-top: 20px;
        }
        .slider {
            margin: 10px 0;
            width: 700px; /* 7 korda pikem liugur */
        }
        .toggle {
            margin-top: 30px;
        }
        .slider-label {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .slider-label span {
            font-size: 1em;
        }
    </style>
</head>
<body>
    <h1>Tuiklemine</h1>

    <div class="frequency">
        <p style="font-size: 1.5em;">600 Hz (fikseeritud) + <span id="frequency-display">600</span> Hz</p>
    </div>

    <input id="frequency-slider" class="slider" type="range" min="-12" max="12" value="0" step="1">
    <div class="slider-label">
        <span>-12 Hz</span>
        <span>-6 Hz</span>
        <span>0 Hz</span>
        <span>6 Hz</span>
        <span>12 Hz</span>
    </div>

    <button id="toggle-sound" class="toggle">L체lita heli sisse</button>

    <script>
        const context = new (window.AudioContext || window.webkitAudioContext)();
        let oscillator1, oscillator2;
        let isPlaying = false;

        const slider = document.getElementById('frequency-slider');
        const frequencyDisplay = document.getElementById('frequency-display');
        const toggleButton = document.getElementById('toggle-sound');

        function createOscillator(frequency) {
            const oscillator = context.createOscillator();
            oscillator.type = 'sine'; // Kasutame puhast siinusheli
            oscillator.frequency.value = frequency;
            oscillator.connect(context.destination);
            return oscillator;
        }

        function startSound() {
            oscillator1 = createOscillator(600);
            oscillator2 = createOscillator(600);
            oscillator1.start();
            oscillator2.start();
            isPlaying = true;
        }

        function stopSound() {
            if (oscillator1) oscillator1.stop();
            if (oscillator2) oscillator2.stop();
            isPlaying = false;
        }

        slider.addEventListener('input', () => {
            const offset = parseInt(slider.value, 10);
            const newFrequency = 600 + offset;
            frequencyDisplay.textContent = newFrequency;
            if (oscillator2) {
                oscillator2.frequency.setValueAtTime(newFrequency, context.currentTime);
            }
        });

        toggleButton.addEventListener('click', () => {
            if (isPlaying) {
                stopSound();
                toggleButton.textContent = 'L체lita heli sisse';
            } else {
                startSound();
                toggleButton.textContent = 'L체lita heli v채lja';
            }
        });
    </script>
</body>
</html>

